sudo: false
language: go
go:
  - 1.11.x
before_install:
  - 'git config --global url.git@github.com:.insteadof https://github.com/'
script:
  - make test
after_success:
  - make release
after_script: for tgz in $(git ls-files -o | grep tar.gz); do echo $tgz $(openssl sha256 < $tgz); done
branches:
  only:
    - master
addons:
  artifacts:
    paths:
      - '$(git ls-files -o | grep .tar.gz | tr "\n" ":")'
    debug: true
    s3_region: eu-west-1
    s3_bucket: remerge-artifacts
    target_paths: $TRAVIS_REPO_SLUG
